<div class="table-form-container">
  <!-- Fixed Header with Job and Report Info -->
  <div class="header-bar">
    <div class="header-item">
      <label>Job Number:</label>
      <span>{{ jobDetails.jobNumber }}</span>
    </div>
    <div class="header-item">
      <label>Report Number:</label>
      <span>{{ jobDetails.reportNumber }}</span>
    </div>
  </div>

  <h3>Enter Support Details</h3>

  <div class="table-wrapper">
    <table class="support-table">
      <thead>
      <tr>
        <th>Drawing No</th>
        <th>Assembly Tag No</th>
        <th>Qty</th>
        <th>Item No</th>
        <th>Item Description</th>
        <th>Specification Grade</th>
        <th>Action</th>
      </tr>
      </thead>
      <tbody>
      <!-- Input Row -->
      <tr>
        <td><input type="text" [(ngModel)]="newSupport.drawingNo"  [class.invalid]="isFieldInvalid(newSupport.drawingNo)"/></td>
        <td><input type="text" [(ngModel)]="newSupport.desc" /></td>
        <td><input type="text" [(ngModel)]="newSupport.qty" /></td>
        <td><input type="text" [(ngModel)]="newSupport.itemNo" /></td>
        <td><input type="text" [(ngModel)]="newSupport.itemDesc" /></td>
        <td><input type="text" [(ngModel)]="newSupport.specGrade" /></td>
        <td><button (click)="saveSupport()"><i class="fa fa-save"></i></button></td>
      </tr>

      <!-- Saved Data Rows -->
      <tr *ngFor="let support of supportList">
        <td>
          <input *ngIf="editingRow === support" [(ngModel)]="editingRow.drawingNo" />
          <span *ngIf="editingRow !== support">{{ support.drawingNo }}</span>
        </td>
        <td>
          <input *ngIf="editingRow === support" [(ngModel)]="editingRow.desc" />
          <span *ngIf="editingRow !== support">{{ support.desc }}</span>
        </td>
        <td>
          <input *ngIf="editingRow === support" [(ngModel)]="editingRow.qty" />
          <span *ngIf="editingRow !== support">{{ support.qty }}</span>
        </td>
        <td>
          <input *ngIf="editingRow === support" [(ngModel)]="editingRow.itemNo" />
          <span *ngIf="editingRow !== support">{{ support.itemNo }}</span>
        </td>
        <td>
          <input *ngIf="editingRow === support" [(ngModel)]="editingRow.itemDesc" />
          <span *ngIf="editingRow !== support">{{ support.itemDesc }}</span>
        </td>
        <td>
          <input *ngIf="editingRow === support" [(ngModel)]="editingRow.specGrade" />
          <span *ngIf="editingRow !== support">{{ support.specGrade }}</span>
        </td>
        <td>
          <button *ngIf="editingRow !== support" (click)="editSupport(support)">
            <i class="fa fa-edit"></i>
          </button>
          <button *ngIf="editingRow === support" (click)="saveEditedSupport(support)">
            <i class="fa fa-save"></i>
          </button>
        </td>
      </tr>
      </tbody>
    </table>
  </div>
</div>
