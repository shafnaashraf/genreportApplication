<div class="search-container">
  <div class="field-group">
    <label for="searchJobNumber">Job Number:</label>
    <input
      type="text"
      id="searchJobNumber"
      placeholder="Enter Job Number"
      [(ngModel)]="searchJobNumber"
      name="jobNumber"
    />
  </div>

  <div class="field-group">
    <label >Report Number:</label>
    <div class="dropdown-container">
      <div class="dropdown-display" (click)="toggleDropdown()">
        {{ selectedReportNumbers.length ? selectedReportNumbers.join(', ') : 'Select Report Numbers' }}
        <span class="arrow">&#9662;</span>
      </div>

      <div class="checkbox-list" *ngIf="showDropdown">
        <div class="checkbox-item" *ngFor="let report of availableReportNumbers">
          <input
            type="checkbox"
            [value]="report"
            (change)="toggleReportSelection(report, $event)"
            [checked]="selectedReportNumbers.includes(report)"
          />
          <span>{{ report }}</span>
        </div>
      </div>
    </div>
  </div>

  <div class="field-group button-group">
    <label>&nbsp;</label>
    <button (click)="search()">Search</button>
  </div>
</div>

<div class="report-header">
  <div class="job-info">
    <label><strong>JOB NUMBER:</strong> {{searchJobNumber}}</label>
    <label><strong>REPORT NUMBER:</strong> {{selectedReportNumbers}}</label>
  </div>
  <div class="title">DAS ISLAND SECTIONAL REPLACEMENT OF LZ RELIEF HEADER</div>
</div>

<table class="summary-table">
  <thead>
  <tr>
    <th>JOB NUMBER</th>
    <th>TITLE</th>
    <th>Total QTY</th>
    <th>UOM</th>
    <th>Cutting</th>
    <th>Fitup</th>
    <th>Welding</th>
    <th>Fabrication Comp.%</th>
    <th>Paint Release Date</th>
    <th>Blasting & Painting</th>
    <th>Comp.%</th>
    <th>Remarks</th>
    <th>Action</th>
  </tr>
  </thead>
  <tbody>
  <tr *ngFor="let row of summaryRows; let i = index">
    <td>
      <input *ngIf="row.isEditing" [(ngModel)]="row.jobNumber" />
      <span *ngIf="!row.isEditing">{{ row.jobNumber }}</span>
    </td>
    <td>
      <input *ngIf="row.isEditing" [(ngModel)]="row.title" />
      <span *ngIf="!row.isEditing">{{ row.title }}</span>
    </td>
    <td>
      <input *ngIf="row.isEditing" [(ngModel)]="row.totalQty" />
      <span *ngIf="!row.isEditing">{{ row.totalQty }}</span>
    </td>
    <td>
      <input *ngIf="row.isEditing" [(ngModel)]="row.uom" />
      <span *ngIf="!row.isEditing">{{ row.uom }}</span>
    </td>
    <td>
      <input *ngIf="row.isEditing" [(ngModel)]="row.cutting" />
      <span *ngIf="!row.isEditing">{{ row.cutting }}</span>
    </td>
    <td>
      <input *ngIf="row.isEditing" [(ngModel)]="row.fitup" />
      <span *ngIf="!row.isEditing">{{ row.fitup }}</span>
    </td>
    <td>
      <input *ngIf="row.isEditing" [(ngModel)]="row.welding" />
      <span *ngIf="!row.isEditing">{{ row.welding }}</span>
    </td>
    <td>
      <input *ngIf="row.isEditing" [(ngModel)]="row.fabricationComp" />
      <span *ngIf="!row.isEditing">{{ row.fabricationComp }}</span>
    </td>
    <td>
      <input *ngIf="row.isEditing" [(ngModel)]="row.paintReleaseDate" />
      <span *ngIf="!row.isEditing">{{ row.paintReleaseDate }}</span>
    </td>
    <td>
      <input *ngIf="row.isEditing" [(ngModel)]="row.blastPaint" />
      <span *ngIf="!row.isEditing">{{ row.blastPaint }}</span>
    </td>
    <td>
      <input *ngIf="row.isEditing" [(ngModel)]="row.comp" />
      <span *ngIf="!row.isEditing">{{ row.comp }}</span>
    </td>
    <td>
      <input *ngIf="row.isEditing" [(ngModel)]="row.remarks" />
      <span *ngIf="!row.isEditing">{{ row.remarks }}</span>
    </td>
    <td>
      <button class="edit-btn" (click)="toggleEdit(row)">{{ row.isEditing ? 'Save' : 'Edit' }}</button>
    </td>
  </tr>
  </tbody>
</table>
